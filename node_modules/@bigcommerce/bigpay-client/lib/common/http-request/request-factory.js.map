{"version":3,"file":"request-factory.js","names":["RequestFactory","_classCallCheck","_createClass","key","value","createRequest","url","options","callback","xhr","XMLHttpRequest","onerror","Error","statusText","onload","open","method","setOptions","setHeaders","headers","headerKeys","Object","keys","forEach","setRequestHeader","withCredentials","create","exports","default"],"sources":["../../../src/common/http-request/request-factory.js"],"sourcesContent":["export default class RequestFactory {\n    /**\n     * @returns {RequestFactory}\n     */\n    static create() {\n        return new RequestFactory();\n    }\n\n    /**\n     * @param {string} url\n     * @param {Object} options\n     * @param {Function} [callback]\n     * @returns {XMLHttpRequest}\n     */\n    createRequest(url, options, callback) {\n        const xhr = new XMLHttpRequest();\n\n        xhr.onerror = () => {\n            if (callback) {\n                callback(new Error(xhr.statusText));\n            }\n        };\n\n        xhr.onload = () => {\n            if (callback) {\n                callback();\n            }\n        };\n\n        xhr.open(options.method, url, true);\n        this.setOptions(xhr, options);\n\n        return xhr;\n    }\n\n    /**\n     * @private\n     * @param {XMLHttpRequest} xhr\n     * @param {Object} headers\n     * @returns {void}\n     */\n    setHeaders(xhr, headers) {\n        const headerKeys = Object.keys(headers);\n\n        headerKeys.forEach((key) => {\n            const value = headers[key];\n\n            xhr.setRequestHeader(key, value);\n        });\n    }\n\n    /**\n     * @private\n     * @param {XMLHttpRequest} xhr\n     * @param {Object} options\n     * @returns {void}\n     */\n    setOptions(xhr, options) {\n        xhr.withCredentials = options.withCredentials;\n\n        if (options.headers) {\n            this.setHeaders(xhr, options.headers);\n        }\n    }\n}\n"],"mappings":";;;;;;;;;;;;IAAqBA,cAAc;EAAA,SAAAA,eAAA;IAAAC,eAAA,OAAAD,cAAA;EAAA;EAAAE,YAAA,CAAAF,cAAA;IAAAG,GAAA;IAAAC,KAAA;IAQ/B;AACJ;AACA;AACA;AACA;AACA;IACI,SAAAC,cAAcC,GAAG,EAAEC,OAAO,EAAEC,QAAQ,EAAE;MAClC,IAAMC,GAAG,GAAG,IAAIC,cAAc,EAAE;MAEhCD,GAAG,CAACE,OAAO,GAAG,YAAM;QAChB,IAAIH,QAAQ,EAAE;UACVA,QAAQ,CAAC,IAAII,KAAK,CAACH,GAAG,CAACI,UAAU,CAAC,CAAC;QACvC;MACJ,CAAC;MAEDJ,GAAG,CAACK,MAAM,GAAG,YAAM;QACf,IAAIN,QAAQ,EAAE;UACVA,QAAQ,EAAE;QACd;MACJ,CAAC;MAEDC,GAAG,CAACM,IAAI,CAACR,OAAO,CAACS,MAAM,EAAEV,GAAG,EAAE,IAAI,CAAC;MACnC,IAAI,CAACW,UAAU,CAACR,GAAG,EAAEF,OAAO,CAAC;MAE7B,OAAOE,GAAG;IACd;;IAEA;AACJ;AACA;AACA;AACA;AACA;EALI;IAAAN,GAAA;IAAAC,KAAA,EAMA,SAAAc,WAAWT,GAAG,EAAEU,OAAO,EAAE;MACrB,IAAMC,UAAU,GAAGC,MAAM,CAACC,IAAI,CAACH,OAAO,CAAC;MAEvCC,UAAU,CAACG,OAAO,CAAC,UAACpB,GAAG,EAAK;QACxB,IAAMC,KAAK,GAAGe,OAAO,CAAChB,GAAG,CAAC;QAE1BM,GAAG,CAACe,gBAAgB,CAACrB,GAAG,EAAEC,KAAK,CAAC;MACpC,CAAC,CAAC;IACN;;IAEA;AACJ;AACA;AACA;AACA;AACA;EALI;IAAAD,GAAA;IAAAC,KAAA,EAMA,SAAAa,WAAWR,GAAG,EAAEF,OAAO,EAAE;MACrBE,GAAG,CAACgB,eAAe,GAAGlB,OAAO,CAACkB,eAAe;MAE7C,IAAIlB,OAAO,CAACY,OAAO,EAAE;QACjB,IAAI,CAACD,UAAU,CAACT,GAAG,EAAEF,OAAO,CAACY,OAAO,CAAC;MACzC;IACJ;EAAC;IAAAhB,GAAA;IAAAC,KAAA;IA9DD;AACJ;AACA;IACI,SAAAsB,OAAA,EAAgB;MACZ,OAAO,IAAI1B,cAAc,EAAE;IAC/B;EAAC;EAAA,OAAAA,cAAA;AAAA;AAAA2B,OAAA,CAAAC,OAAA,GAAA5B,cAAA"}
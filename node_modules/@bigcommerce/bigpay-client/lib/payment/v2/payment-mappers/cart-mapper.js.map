{"version":3,"file":"cart-mapper.js","names":["_utils","require","_typeof","obj","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","protoProps","staticProps","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","call","Number","CartMapper","value","mapToCart","data","_data$cart","cart","omitNil","currency_code","currency","items","mapToItems","totals","mapToOrderTotals","_this","_data$cart2","map","itemData","discount_amount","integerDiscount","name","price","integerAmount","unit_price","integerUnitPrice","quantity","sku","tax_amount","integerTax","amount","integerAmountAfterDiscount","type","mapToType","_data$cart3","discount_total","discount","grand_total","grandTotal","shipping_total","shipping","subtotal","surcharge_total","handling","tax_total","taxTotal","types","ItemPhysicalEntity","ItemDigitalEntity","ItemGiftCertificateEntity","create","exports","default"],"sources":["../../../../src/payment/v2/payment-mappers/cart-mapper.js"],"sourcesContent":["import { omitNil } from '../../../common/utils';\n\nexport default class CartMapper {\n    /**\n     * @returns {CartMapper}\n     */\n    static create() {\n        return new CartMapper();\n    }\n\n    /**\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n    mapToCart(data) {\n        const { cart = {} } = data;\n\n        return omitNil({\n            currency_code: cart.currency,\n            items: this.mapToItems(data),\n            totals: this.mapToOrderTotals(data),\n        });\n    }\n\n    /**\n     * @private\n     * @param {PaymentRequestData} data\n     * @returns {Object[]}\n     */\n    mapToItems(data) {\n        const { cart = { items: [] } } = data;\n\n        return cart.items.map((itemData) => omitNil({\n            discount_amount: itemData.integerDiscount,\n            name: itemData.name,\n            price: itemData.integerAmount,\n            unit_price: itemData.integerUnitPrice,\n            quantity: itemData.quantity,\n            sku: itemData.sku,\n            tax_amount: itemData.integerTax,\n            amount: itemData.integerAmountAfterDiscount,\n            type: this.mapToType(itemData),\n        }));\n    }\n\n    /**\n     * @private\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n    mapToOrderTotals(data) {\n        const { cart = {} } = data;\n\n        return omitNil({\n            discount_total: cart.discount ? cart.discount.integerAmount : null,\n            grand_total: cart.grandTotal ? cart.grandTotal.integerAmount : null,\n            shipping_total: cart.shipping ? cart.shipping.integerAmount : null,\n            subtotal: cart.subtotal ? cart.subtotal.integerAmount : null,\n            surcharge_total: cart.handling ? cart.handling.integerAmount : null,\n            tax_total: cart.taxTotal ? cart.taxTotal.integerAmount : null,\n        });\n    }\n\n    /**\n     * @private\n     * @param {Object} itemData\n     * @returns {Object}\n     */\n    mapToType(itemData) {\n        const types = {\n            ItemPhysicalEntity: 'physical',\n            ItemDigitalEntity: 'digital',\n            ItemGiftCertificateEntity: 'gift_card',\n        };\n\n        return types[itemData.type];\n    }\n}\n"],"mappings":"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"}
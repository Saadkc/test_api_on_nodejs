{"version":3,"file":"payment-submitter.js","names":["_requestSender","_interopRequireDefault","require","_paymentTypes","_payloadMapper","_ppsdkPayloadMapper","_urlHelper","obj","__esModule","default","_typeof","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","protoProps","staticProps","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","call","Number","PaymentSubmitter","urlHelper","requestSender","payloadMapper","ppsdkPayloadMapper","value","submitPayment","data","callback","_data$paymentMethod","paymentMethod","type","API","SDK","Error","concat","payload","mapToPayload","url","getPpsdkPaymentUrl","getPaymentUrl","options","headers","mapToHeaders","postRequest","create","config","UrlHelper","RequestSender","PayloadMapper","PpsdkPayloadMapper","exports"],"sources":["../../src/payment/payment-submitter.js"],"sourcesContent":["import RequestSender from '../common/http-request/request-sender';\nimport { API, SDK } from './payment-types';\nimport PayloadMapper from './v1/payment-mappers/payload-mapper';\nimport PpsdkPayloadMapper from './ppsdk/payment-mappers/ppsdk-payload-mapper';\nimport UrlHelper from './url-helper';\n\nexport default class PaymentSubmitter {\n    /**\n     * @param {Object} config\n     * @returns {PaymentSubmitter}\n     */\n    static create(config) {\n        const urlHelper = UrlHelper.create(config);\n        const requestSender = RequestSender.create();\n        const payloadMapper = PayloadMapper.create();\n        const ppsdkPayloadMapper = PpsdkPayloadMapper.create();\n\n        return new PaymentSubmitter(urlHelper, requestSender, payloadMapper, ppsdkPayloadMapper);\n    }\n\n    /**\n     * @param {UrlHelper} urlHelper\n     * @param {RequestSender} requestSender\n     * @param {PayloadMapper} payloadMapper\n     * @param {PpsdkPayloadMapper} ppsdkPayloadMapper\n     * @returns {void}\n     */\n    constructor(urlHelper, requestSender, payloadMapper, ppsdkPayloadMapper) {\n        /**\n         * @private\n         * @type {UrlHelper}\n         */\n        this.urlHelper = urlHelper;\n\n        /**\n         * @private\n         * @type {RequestSender}\n         */\n        this.requestSender = requestSender;\n\n        /**\n         * @private\n         * @type {PayloadMapper}\n         */\n        this.payloadMapper = payloadMapper;\n\n        /**\n        * @private\n        * @type {PpsdkPayloadMapper}\n        */\n        this.ppsdkPayloadMapper = ppsdkPayloadMapper;\n    }\n\n    /**\n     * @param {PaymentRequestData} data\n     * @param {Function} [callback]\n     * @returns {void}\n     * @throws {Error}\n     */\n    submitPayment(data, callback) {\n        const { paymentMethod = {} } = data;\n\n        if (paymentMethod.type !== API && paymentMethod.type !== SDK) {\n            throw new Error(`${paymentMethod.type} is not supported.`);\n        }\n\n        const payload = paymentMethod.type === SDK ? this.ppsdkPayloadMapper.mapToPayload(data) : this.payloadMapper.mapToPayload(data);\n        const url = paymentMethod.type === SDK ? this.urlHelper.getPpsdkPaymentUrl() : this.urlHelper.getPaymentUrl();\n        const options = {\n            headers: this.payloadMapper.mapToHeaders(data),\n        };\n\n        this.requestSender.postRequest(url, payload, options, callback);\n    }\n}\n"],"mappings":";;;;;;AAAA,IAAAA,cAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,aAAA,GAAAD,OAAA;AACA,IAAAE,cAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,mBAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,UAAA,GAAAL,sBAAA,CAAAC,OAAA;AAAqC,SAAAD,uBAAAM,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAAA,SAAAG,QAAAH,GAAA,sCAAAG,OAAA,wBAAAC,MAAA,uBAAAA,MAAA,CAAAC,QAAA,aAAAL,GAAA,kBAAAA,GAAA,gBAAAA,GAAA,WAAAA,GAAA,yBAAAI,MAAA,IAAAJ,GAAA,CAAAM,WAAA,KAAAF,MAAA,IAAAJ,GAAA,KAAAI,MAAA,CAAAG,SAAA,qBAAAP,GAAA,KAAAG,OAAA,CAAAH,GAAA;AAAA,SAAAQ,gBAAAC,QAAA,EAAAC,WAAA,UAAAD,QAAA,YAAAC,WAAA,eAAAC,SAAA;AAAA,SAAAC,kBAAAC,MAAA,EAAAC,KAAA,aAAAC,CAAA,MAAAA,CAAA,GAAAD,KAAA,CAAAE,MAAA,EAAAD,CAAA,UAAAE,UAAA,GAAAH,KAAA,CAAAC,CAAA,GAAAE,UAAA,CAAAC,UAAA,GAAAD,UAAA,CAAAC,UAAA,WAAAD,UAAA,CAAAE,YAAA,wBAAAF,UAAA,EAAAA,UAAA,CAAAG,QAAA,SAAAC,MAAA,CAAAC,cAAA,CAAAT,MAAA,EAAAU,cAAA,CAAAN,UAAA,CAAAO,GAAA,GAAAP,UAAA;AAAA,SAAAQ,aAAAf,WAAA,EAAAgB,UAAA,EAAAC,WAAA,QAAAD,UAAA,EAAAd,iBAAA,CAAAF,WAAA,CAAAH,SAAA,EAAAmB,UAAA,OAAAC,WAAA,EAAAf,iBAAA,CAAAF,WAAA,EAAAiB,WAAA,GAAAN,MAAA,CAAAC,cAAA,CAAAZ,WAAA,iBAAAU,QAAA,mBAAAV,WAAA;AAAA,SAAAa,eAAAK,GAAA,QAAAJ,GAAA,GAAAK,YAAA,CAAAD,GAAA,oBAAAzB,OAAA,CAAAqB,GAAA,iBAAAA,GAAA,GAAAM,MAAA,CAAAN,GAAA;AAAA,SAAAK,aAAAE,KAAA,EAAAC,IAAA,QAAA7B,OAAA,CAAA4B,KAAA,kBAAAA,KAAA,kBAAAA,KAAA,MAAAE,IAAA,GAAAF,KAAA,CAAA3B,MAAA,CAAA8B,WAAA,OAAAD,IAAA,KAAAE,SAAA,QAAAC,GAAA,GAAAH,IAAA,CAAAI,IAAA,CAAAN,KAAA,EAAAC,IAAA,oBAAA7B,OAAA,CAAAiC,GAAA,uBAAAA,GAAA,YAAAzB,SAAA,4DAAAqB,IAAA,gBAAAF,MAAA,GAAAQ,MAAA,EAAAP,KAAA;AAAA,IAEhBQ,gBAAgB;EAcjC;AACJ;AACA;AACA;AACA;AACA;AACA;EACI,SAAAA,iBAAYC,SAAS,EAAEC,aAAa,EAAEC,aAAa,EAAEC,kBAAkB,EAAE;IAAAnC,eAAA,OAAA+B,gBAAA;IACrE;AACR;AACA;AACA;IACQ,IAAI,CAACC,SAAS,GAAGA,SAAS;;IAE1B;AACR;AACA;AACA;IACQ,IAAI,CAACC,aAAa,GAAGA,aAAa;;IAElC;AACR;AACA;AACA;IACQ,IAAI,CAACC,aAAa,GAAGA,aAAa;;IAElC;AACR;AACA;AACA;IACQ,IAAI,CAACC,kBAAkB,GAAGA,kBAAkB;EAChD;;EAEA;AACJ;AACA;AACA;AACA;AACA;EALIlB,YAAA,CAAAc,gBAAA;IAAAf,GAAA;IAAAoB,KAAA,EAMA,SAAAC,cAAcC,IAAI,EAAEC,QAAQ,EAAE;MAC1B,IAAAC,mBAAA,GAA+BF,IAAI,CAA3BG,aAAa;QAAbA,aAAa,GAAAD,mBAAA,cAAG,CAAC,CAAC,GAAAA,mBAAA;MAE1B,IAAIC,aAAa,CAACC,IAAI,KAAKC,iBAAG,IAAIF,aAAa,CAACC,IAAI,KAAKE,iBAAG,EAAE;QAC1D,MAAM,IAAIC,KAAK,IAAAC,MAAA,CAAIL,aAAa,CAACC,IAAI,wBAAqB;MAC9D;MAEA,IAAMK,OAAO,GAAGN,aAAa,CAACC,IAAI,KAAKE,iBAAG,GAAG,IAAI,CAACT,kBAAkB,CAACa,YAAY,CAACV,IAAI,CAAC,GAAG,IAAI,CAACJ,aAAa,CAACc,YAAY,CAACV,IAAI,CAAC;MAC/H,IAAMW,GAAG,GAAGR,aAAa,CAACC,IAAI,KAAKE,iBAAG,GAAG,IAAI,CAACZ,SAAS,CAACkB,kBAAkB,EAAE,GAAG,IAAI,CAAClB,SAAS,CAACmB,aAAa,EAAE;MAC7G,IAAMC,OAAO,GAAG;QACZC,OAAO,EAAE,IAAI,CAACnB,aAAa,CAACoB,YAAY,CAAChB,IAAI;MACjD,CAAC;MAED,IAAI,CAACL,aAAa,CAACsB,WAAW,CAACN,GAAG,EAAEF,OAAO,EAAEK,OAAO,EAAEb,QAAQ,CAAC;IACnE;EAAC;IAAAvB,GAAA;IAAAoB,KAAA;IAlED;AACJ;AACA;AACA;IACI,SAAAoB,OAAcC,MAAM,EAAE;MAClB,IAAMzB,SAAS,GAAG0B,kBAAS,CAACF,MAAM,CAACC,MAAM,CAAC;MAC1C,IAAMxB,aAAa,GAAG0B,sBAAa,CAACH,MAAM,EAAE;MAC5C,IAAMtB,aAAa,GAAG0B,sBAAa,CAACJ,MAAM,EAAE;MAC5C,IAAMrB,kBAAkB,GAAG0B,2BAAkB,CAACL,MAAM,EAAE;MAEtD,OAAO,IAAIzB,gBAAgB,CAACC,SAAS,EAAEC,aAAa,EAAEC,aAAa,EAAEC,kBAAkB,CAAC;IAC5F;EAAC;EAAA,OAAAJ,gBAAA;AAAA;AAAA+B,OAAA,CAAApE,OAAA,GAAAqC,gBAAA"}
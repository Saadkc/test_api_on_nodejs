{"version":3,"file":"store-request-sender.js","names":["_requestSender","_interopRequireDefault","require","_methodTypes","_urlHelper","_mappers","obj","__esModule","default","_typeof","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","protoProps","staticProps","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","call","Number","StoreRequestSender","urlHelper","requestSender","value","loadInstruments","data","callback","url","getInstrumentsUrl","storeId","customerId","currencyCode","options","headers","mapToHeaders","sendRequest","loadInstrumentsWithAddress","getTrustedShippingAddressUrl","payload","mapToTrustedShippingAddressPayload","method","POST","postRequest","deleteShopperInstrument","getInstrumentByIdUrl","instrumentId","DELETE","create","config","UrlHelper","RequestSender","exports"],"sources":["../../src/store/store-request-sender.js"],"sourcesContent":["import RequestSender from '../common/http-request/request-sender';\nimport { DELETE, POST } from '../common/http-request/method-types';\nimport UrlHelper from './url-helper';\nimport {\n    mapToHeaders,\n    mapToTrustedShippingAddressPayload,\n} from './v2/mappers';\n\nexport default class StoreRequestSender {\n    /**\n     * @param {Object} config\n     * @returns {StoreRequestSender}\n     */\n    static create(config) {\n        const urlHelper = UrlHelper.create(config);\n        const requestSender = RequestSender.create();\n\n        return new StoreRequestSender(urlHelper, requestSender);\n    }\n\n    /**\n     * @param {UrlHelper} urlHelper\n     * @param {RequestSender} requestSender\n     * @returns {void}\n     */\n    constructor(urlHelper, requestSender) {\n        /**\n         * @private\n         * @type {UrlHelper}\n         */\n        this.urlHelper = urlHelper;\n\n        /**\n         * @private\n         * @type {RequestSender}\n         */\n        this.requestSender = requestSender;\n    }\n\n    /**\n     * @param {Object} data\n     * @param {Function} [callback]\n     * @return {void}\n     */\n    loadInstruments(data, callback) {\n        const url = this.urlHelper.getInstrumentsUrl(\n            data.storeId,\n            data.customerId,\n            data.currencyCode,\n        );\n        const options = {\n            headers: mapToHeaders(data),\n        };\n\n        this.requestSender.sendRequest(url, null, options, callback);\n    }\n\n    /**\n     * @param {Object} data\n     * @param {Function} [callback]\n     * @return {void}\n     */\n    loadInstrumentsWithAddress(data, callback) {\n        const url = this.urlHelper.getTrustedShippingAddressUrl(\n            data.storeId,\n            data.customerId,\n            data.currencyCode,\n        );\n        const payload = mapToTrustedShippingAddressPayload(data);\n        const options = {\n            method: POST,\n            headers: mapToHeaders(data),\n        };\n\n        this.requestSender.postRequest(url, payload, options, callback);\n    }\n\n    /**\n     * @param {Object} data\n     * @param {Function} [callback]\n     * @return {void}\n     */\n    deleteShopperInstrument(data, callback) {\n        const url = this.urlHelper.getInstrumentByIdUrl(\n            data.storeId,\n            data.customerId,\n            data.instrumentId,\n            data.currencyCode,\n        );\n        const options = {\n            method: DELETE,\n            headers: mapToHeaders(data),\n        };\n\n        this.requestSender.sendRequest(url, null, options, callback);\n    }\n}\n"],"mappings":"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"}